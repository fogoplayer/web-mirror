<html>
<head>
    <title>Web Mirror</title>
    <link rel="icon" href="mirror192.png" type="image/png"/>
    <link rel="manifest" href="manifest.json">
</head>
<style>
    body{
        padding:0;
        margin:0;
    }
    div {
        position: fixed;
        text-position: fixed;
        text-align:  center;
        width: 100%;
        background-color: #00000055;
        font-size: 7em;
        color: #fff;
        font-family: Roboto, sans-serif;
    }
    
    video{
        width:100%;
        height:100%;
        object-fit:cover;
    }
</style>
<body>
    <video id="player" autoplay=""></video>
    <script>
        //Service Worker
        if (navigator.serviceWorker.controller) {
            console.log('[PWA Builder] active service worker found, no need to register')
        } else {

        //Register the ServiceWorker
            navigator.serviceWorker.register('sw.js', {
                scope: './'
            }).then(function(reg) {
                console.log('Service worker has been registered for scope:'+ reg.scope);
            });
        }

        //Install Prompt
        var installPromptEvent;

        window.addEventListener('beforeinstallprompt', (event) => {
          // Prevent Chrome <= 67 from automatically showing the prompt
          event.preventDefault();
          // Stash the event so it can be triggered later.
          installPromptEvent = event;
          // Update the install UI to notify the user app can be installed
          document.querySelector('#install-button').disabled = false;
        });
      
      //Video Stream
      var player = document.getElementById('player');
    
      var handleSuccess = function(stream) {
        player.srcObject = stream;
      };
    
      navigator.mediaDevices.getUserMedia({video: true })
          .then(handleSuccess)
    </script>
</body>
</html>
